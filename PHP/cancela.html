<!DOCTYPE html>
<html>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <body>
    <main>
    <div class="container">
      <center><h1>Exemplo de <span class="badge badge-danger">cancelamento</span> no Manager SaaS em <span class="badge badge-info">PHP</span></h1></center>
      <hr>
      <form action="abou:blank">
        <div class="form-group">
          <label for="urlsaas">URL do SaaS</label>
          <input type="text" class="form-control" id="urlsaas" aria-describedby="emailHelp" placeholder="managersaas..." value="managersaashom.tecnospeed.com.br">
          <small id="emailHelp" class="form-text text-muted">Ex: managersaashom.tecnospeed.com.br</small>
        </div>
        <div class="form-group">
          <label for="grupo">Grupo</label>
          <input type="text" class="form-control" name="grupo" id="grupo" placeholder="Grupo" value="edoc">
        </div>
        <div class="form-group">
          <label for="cnpj">CNPJ</label>
          <input type="text" class="form-control" name="cnpj" id="cnpj" placeholder="CNPJ" value="08187168000160">
        </div>
        <div class="form-group">
          <label for="usuario">Usuário</label>
          <input type="text" class="form-control" id="usuario" placeholder="Usuário" value="admin">
        </div>
        <div class="form-group">
          <label for="senha">Senha</label>
          <input type="password" class="form-control" id="senha" placeholder="Senha" value="123mudar">
        </div>
        <div class="form-group">
          <label for="chave">Chave da nota</label>
          <input type="text" class="form-control" id="chavenota" placeholder="Chave" value="41170208187168000160553210000006521000000019">
        </div>
        <div class="form-group">
          <label for="justificativa">Justificativa de pelo menos 15 caracteres.</label>
          <input type="text" class="form-control" id="justificativa" placeholder="justificativa" value="Estou realizando um teste em php para cancelar a nota">
        </div>
        <button type="submit" class="btn btn-danger">Cancelar</button>
      </form>
      <hr>
      <center><img id="loading" style="visibility: hidden;" src="img/loading.gif" width="10%"></center>
      <div>
        <label for="retorno">Retorno</label>
        <textarea class="form-control" id="retorno" rows="2" style="resize: none;" value="<?php echo $retorno ?>" name="retorno"></textarea>
      </div>
      <br>
      <center><div class="container">
        <h3>O que temos nesse formato de retorno?</h3>
        <h6>"<code>Protocolo de autorização ou  palavra Exception</code>", "<code>cStat ou classe Exception</code>", "<code>mensagem Sefaz ou mensagem Exception.</code>" </h6>
      </div>
      <a href="index.html" target="_blank"><span class="badge badge-pill badge-primary">Envio</span></a>
      <a href="imprime.html" target="_blank"><span class="badge badge-pill badge-warning">Imprime</span></a>
      <a href="consulta.html" target="_blank"><span class="badge badge-pill badge-info">Consulta</span></a>
      <hr>
      <p>Para informações a respeito da criação de sua conta no SaaS e mais informações a respeito do SaaS e de suas rotas, clique no botão <code>"Mais informações"</code></p>
      <h3><a href="sobreosaas.html"><span class="badge badge-pill badge-success">Mais informações!</span></a></h3>
      <br>
      </center>
    </div>
    </main>
    <footer>
      Docs. Copyright &copy; Tecnospeed 2017
    </footer>
  </body>
  <script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
  <script type="text/javascript">
  $("form").submit(function(){
    document.getElementById("loading").style.visibility = "visible"
  var urlsaas = document.getElementById('urlsaas').value
  var grupo = document.getElementById('grupo').value
  var cnpj = document.getElementById('cnpj').value
  var usuario = document.getElementById('usuario').value
  var senha = document.getElementById('senha').value
  var chavenota = document.getElementById('chavenota').value
  var justificativa = document.getElementById('justificativa').value
  var data = 'host=' + urlsaas + '&grupo=' + grupo + '&CNPJ=' + cnpj + '&usuario=' + usuario + '&senha=' + senha + "&chavenota=" + chavenota + "&justificativa=" + justificativa
  $.ajax({
  url: 'src/cancela.php',
  type: 'post',
  data: data,
  success: function(retorno) {
        document.getElementById("loading").style.visibility = "hidden"
  document.getElementById('retorno').value = retorno
  }
  })
  });
  </script>
</html>